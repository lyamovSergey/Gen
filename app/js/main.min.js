"use strict";$(function(){function e(e,t){function n(){function t(e,t){return t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?Math.abs(e)%10:5]]}function n(){var e=a.filter(function(e){return 1!=e.main}),n=t(e.length,["аналог","аналога","аналогов"]);$("#analogs").text(e.length),$("#analogsText").text(n)}function i(){0!=r.length?$("#selectedItems").closest(".button").removeClass("disabled"):$("#selectedItems").closest(".button").addClass("disabled"),$("#selectedItems").text(r.length)}function o(e){var t,n=e.coordinates,o=e.main,s=e.id,l=ymaps.templateLayoutFactory.createClass("<div class='my-marker'></div>"),c=ymaps.templateLayoutFactory.createClass("\n                    <div class='my-marker'>\n                        <p class='markerText'>Ваш объект</p>\n                    </div>\n                    "),d={iconLayout:"default#imageWithContent",iconImageHref:"img/png/mapMarker.png",iconImageSize:[48,48],iconImageOffset:[0,0],iconContentOffset:[0,0],iconContentLayout:l,id:s,mainMarker:o,hideIcon:!1,hideIconOnBalloonOpen:!1},u={iconLayout:"default#imageWithContent",iconImageHref:"img/png/mapMarkerMain.png",iconImageSize:[48,48],iconImageOffset:[0,0],iconContentOffset:[0,0],iconContentLayout:c,id:s,mainMarker:o,hideIcon:!1,hideIconOnBalloonOpen:!1};return t=o?new ymaps.Placemark(n,null,u):new ymaps.Placemark(n,{balloonContent:"Ул.Улица<br>Дом 130"},d),t.events.add("click",function(e){var t;if(!e.get("target").options.get("mainMarker"))if(e.get("target").options.get("active")){t=e.get("target").options.get("id"),e.get("target").options.set("active",!1),e.get("target").options.set("iconImageHref","img/png/mapMarker.png");var n=a.find(function(e){return e.id==t});r.pop(n),i()}else{t=e.get("target").options.get("id"),e.get("target").options.set("active",!0),e.get("target").options.set("iconImageHref","img/png/mapMarkerSelected.png");var o=a.find(function(e){return e.id==t});r.push(o),i()}}),t}var s=new ymaps.Map(e,{center:[55.76,37.64],zoom:7});0!=$("#delMap").length&&(document.getElementById("delMap").onclick=function(){s.destroy()});var a=[{id:"place1",main:!0,coordinates:[55.71677,37.482338]},{id:"place2",main:!1,coordinates:[54.837789,34.524173]},{id:"place3",main:!1,coordinates:[56.903489,36.805884]},{id:"place4",main:!1,coordinates:[56.703489,33.805884]},{id:"place5",main:!1,coordinates:[56.703489,38.805884]},{id:"place6",main:!1,coordinates:[55.703489,38.805884]}],r=[];$.each(a,function(e,t){s.geoObjects.add(o(t))}),n()}ymaps.ready(n)}if($("#cityFind").styler(),$(".jq-selectbox__dropdown ul").mCustomScrollbar({autoHideScrollbar:!1}),$("select").formSelect(),$(".del-tag").on("click",function(){$(this).toggleClass("active")}),0!=$("#map").length){e("map")}$(".switch input").on("input",function(){$(this).closest(".table-row__title").toggleClass("inactive"),$(this).closest(".table-row__title").siblings(".table-discription").toggleClass("disabled")}),$(".tags-block .tag").on("click",function(){$(this).toggleClass("active")}),$("#addAnalog").on("click",function(){$.fancybox.open({src:"#modal",afterShow:function(){e("madalMap",!1)},afterClose:function(){$("#delMap").trigger("click")},touch:!1})}),$.each($('input[type="text"]:not(.select-dropdown), input[type="number"]'),function(e,t){$(t).val()?$(t).addClass("notEmpty withIcon"):$(t).removeClass("notEmpty withIcon")}),$('input[type="text"]:not(.select-dropdown), input[type="number"]').on("input",function(){$(this).val()?$(this).addClass("notEmpty withIcon"):$(this).removeClass("notEmpty withIcon")}),$.each($(".select-wrapper"),function(e,t){$(t).find(".selected").hasClass("disabled")||$(t).addClass("no-empty")}),$("input.select-dropdown").on("input",function(){var e=$(this).closest(".select-wrapper");e.find(".selected").hasClass("disabled")?e.addClass("no-empty"):e.removeClass("no-empty")}),$("select").on("change",function(){$(this).closest(".select-wrapper").addClass("no-empty")}),$(".table-container").on("scroll",function(e){var t=$(e.currentTarget),n=t.scrollLeft();t.scrollTop();"scrollBlock1"===t.attr("id")?$("#scrollBlock2").scrollLeft(n):$("#scrollBlock1").scrollLeft(n)})});